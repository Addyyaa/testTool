# 现代化文件传输工具

这是一个基于Tkinter的现代化文件传输工具，支持通过Telnet连接远程设备并通过HTTP服务器进行文件传输。界面风格参考ChatGPT桌面版，提供直观的用户体验。

## 功能特性

### 🌟 核心功能
- **现代化GUI界面**: 采用类似ChatGPT桌面版的现代化设计风格
- **Telnet设备连接**: 支持SSH/Telnet协议连接远程Linux设备
- **远程目录浏览**: 可视化浏览远程设备的文件目录结构
- **拖拽文件上传**: 支持拖拽文件到界面进行快速上传
- **HTTP文件传输**: 本地启动HTTP服务器，远程设备通过wget下载
- **传输队列管理**: 支持批量文件传输和队列管理
- **实时日志监控**: 详细的操作日志和传输状态显示

### 🛠 技术特性
- **异步处理**: 基于asyncio的异步操作，界面响应流畅
- **异常处理**: 完善的错误处理和重试机制
- **多线程支持**: 后台线程处理网络操作，不阻塞界面
- **资源管理**: 自动清理临时文件和网络连接
- **跨平台**: 支持Windows、Linux、macOS操作系统

## 工作原理

### 传输流程
1. **建立连接**: 通过Telnet协议连接到远程Linux设备
2. **目录浏览**: 执行`ls`命令获取远程目录结构
3. **启动HTTP服务**: 在本地88端口启动HTTP文件服务器
4. **文件上传**: 将本地文件复制到HTTP服务器临时目录
5. **远程下载**: 通过Telnet执行`wget`命令从HTTP服务器下载文件
6. **清理资源**: 传输完成后自动清理临时文件

### 架构设计
```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   GUI界面       │    │  HTTP服务器     │    │  远程Linux设备  │
│                 │    │                 │    │                 │
│ ┌─────────────┐ │    │ ┌─────────────┐ │    │ ┌─────────────┐ │
│ │ 连接管理    │ │    │ │ 文件服务    │ │    │ │ Telnet服务  │ │
│ │ 目录浏览    │ │◄──►│ │ 临时存储    │ │◄──►│ │ Shell环境   │ │
│ │ 文件拖拽    │ │    │ │ 下载接口    │ │    │ │ wget下载    │ │
│ │ 传输队列    │ │    │ └─────────────┘ │    │ └─────────────┘ │
│ └─────────────┘ │    └─────────────────┘    └─────────────────┘
└─────────────────┘
```

## 安装和使用

### 环境要求
- Python 3.7+
- tkinter (通常随Python安装)
- 依赖包: tkinterdnd2, telnetlib3

### 安装依赖
```bash
pip install -r fileTransfer/requirements.txt
```

### 启动程序
```bash
python fileTransfer/main_gui.py
```

### 使用步骤

#### 1. 连接设备
1. 在左侧面板输入目标设备信息:
   - 主机地址: 远程设备IP地址
   - 端口: Telnet端口（默认23）
   - 用户名: 登录用户名
   - 密码: 登录密码

2. 点击"连接设备"按钮建立连接
3. 连接成功后状态指示器变绿，显示"已连接"

#### 2. 浏览目录
1. 连接成功后自动显示远程设备根目录
2. 双击目录图标进入子目录
3. 使用"上级"按钮返回上级目录
4. 使用"刷新"按钮刷新当前目录

#### 3. 传输文件
1. **拖拽上传**: 直接将文件拖拽到中央的传输区域
2. **点击选择**: 点击传输区域选择本地文件
3. **队列管理**: 文件添加到左下角的传输队列
4. **开始传输**: 点击"开始传输"按钮启动文件传输
5. **监控进度**: 在日志区域查看传输状态和进度

#### 4. 监控日志
- 所有操作都会在日志区域显示详细信息
- 支持保存日志到本地文件
- 可以清空日志内容

## 界面介绍

### 左侧面板
- **设备连接区域**: 输入连接信息和管理连接状态
- **远程目录区域**: 浏览远程设备的目录结构
- **传输队列区域**: 管理待传输的文件列表

### 右侧面板
- **文件传输区域**: 拖拽文件上传的主要区域
- **操作日志区域**: 显示详细的操作日志和错误信息

### 底部状态栏
- **左侧**: 显示当前操作状态
- **右侧**: 显示HTTP服务器运行状态

## 高级功能

### 批量文件传输
- 支持同时选择多个文件
- 支持拖拽多个文件到传输区域
- 自动管理传输队列和进度

### 错误处理
- 网络连接异常自动重试
- 文件传输失败提示详细错误信息
- 异常情况下自动清理资源

### 安全特性
- 密码输入框自动隐藏显示
- HTTP服务器仅绑定本地接口
- 传输完成后自动清理临时文件
- 路径遍历攻击防护

## 故障排除

### 常见问题

#### 1. 连接失败
- **检查网络**: 确保网络连通性
- **检查端口**: 确认Telnet服务端口正确
- **检查防火墙**: 确保防火墙允许Telnet连接
- **检查凭据**: 验证用户名和密码正确

#### 2. 文件传输失败
- **检查权限**: 确保目标目录有写权限
- **检查空间**: 确保目标设备有足够存储空间
- **检查wget**: 确保远程设备安装了wget工具
- **检查网络**: 确保远程设备能访问本机HTTP服务

#### 3. HTTP服务器启动失败
- **检查端口**: 确保88端口未被占用
- **检查权限**: 确保有权限绑定端口
- **检查防火墙**: 确保防火墙允许HTTP服务

#### 4. 界面异常
- **检查依赖**: 确保tkinterdnd2正确安装
- **重启程序**: 尝试重新启动应用程序
- **查看日志**: 检查控制台错误信息

### 日志分析
程序提供详细的日志信息，包括:
- 连接状态变化
- 文件传输进度
- 错误信息和堆栈跟踪
- HTTP服务器访问日志

## 开发信息

### 项目结构
```
fileTransfer/
├── __init__.py                    # 包初始化文件
├── main_gui.py                    # 主GUI程序
├── file_transfer_gui.py           # GUI界面类（已整合到main_gui.py）
├── file_transfer_gui_events.py    # GUI事件处理类
├── http_server.py                 # HTTP文件服务器
├── file_transfer_controller.py    # 文件传输控制器
├── requirements.txt               # 依赖列表
└── README_FILE_TRANSFER.md        # 本说明文档
```

### 依赖关系
- `telnetTool/telnetConnect.py`: Telnet连接管理
- `tkinterdnd2`: 拖拽功能支持
- `telnetlib3`: 异步Telnet客户端
- `asyncio`: 异步编程支持

### 扩展开发
如需扩展功能，可以修改以下模块:
- **GUI界面**: 修改`main_gui.py`中的界面布局和样式
- **传输协议**: 扩展`file_transfer_controller.py`支持其他传输方式
- **文件服务**: 修改`http_server.py`添加认证或加密功能
- **设备连接**: 扩展Telnet工具支持SSH等其他协议

## 版本信息
- **当前版本**: 1.0.0
- **开发者**: AI Assistant
- **开发日期**: 2024
- **许可协议**: 根据项目主许可协议

## 技术支持
如果您在使用过程中遇到问题，请:
1. 检查本文档的故障排除部分
2. 查看程序日志获取详细错误信息
3. 确保所有依赖正确安装
4. 验证网络连接和设备配置

---

*这个工具旨在提供简单、安全、高效的文件传输解决方案。希望它能提升您的工作效率！* 